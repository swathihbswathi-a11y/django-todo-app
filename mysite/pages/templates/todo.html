{% load static %}
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

<style>
html, body{
  height: 100%;
}
.container-fluid{
  min-height: 100%;
}
</style>

<body style="background:#f5f6fa;">

<div class="container-fluid p-4">

  <h1 class="text-center mb-4" style="color:#2c3e50; font-weight:600;">
    My To-Do App
  </h1>

  <div class="row justify-content-center">
    <div class="col-md-8">

      <form method="POST" class="d-flex mb-4">
        {% csrf_token %}
        <input class="form-control me-2" type="text" name="title" placeholder="Add task" required>
        <button class="btn btn-success" type="submit">Add</button>
      </form>

      <ul class="list-group">
        {% for task in tasks %}
          <li class="list-group-item d-flex justify-content-between">
            {{ task.title }}
            <span>
              <a class="btn btn-sm btn-primary me-2" href="/edit/{{ task.id }}/">Edit</a>
              <a class="btn btn-sm btn-danger" href="/delete/{{ task.id }}/">Delete</a>
            </span>
          </li>
        {% endfor %}
      </ul>

    </div>
  </div>

</div>


{% if messages %}
  <div style="
    position: fixed;
    bottom: 25px;
    left: 0;
    width: 100%;
    text-align: center;
    z-index: 9999;
  ">
    {% for message in messages %}
      <div class="toast-msg"
        style="
          display:inline-block;
          padding:10px 16px;
          margin-top:6px;
          border-radius:10px;
          color:white;
          font-size:15px;
          font-weight:500;
          box-shadow:0 3px 10px rgba(0,0,0,.2);
          border:1px solid rgba(255,255,255,.4);
          background-color:
            {% if message.tags == 'success' %}#2ecc71
            {% elif message.tags == 'warning' %}#f39c12
            {% elif message.tags == 'error' %}#e74c3c
            {% else %}#3498db
            {% endif %};
        ">
        {{ message }}
      </div>
    {% endfor %}
  </div>
{% endif %}


<script>
setTimeout(()=>{
  document.querySelectorAll('.toast-msg').forEach(t=>{
    t.style.transition = "opacity 1s, transform 1s";
    t.style.opacity = 0;
    t.style.transform = "translateY(10px)";
  });
}, 3000);
</script>

</body>
